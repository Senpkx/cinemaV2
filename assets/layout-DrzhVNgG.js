import{u as k,a as y,r as l,j as n,L as A,O as I}from"./index-COfAmmV3.js";import{g as x}from"./axios-CZKTKwxt.js";import{g as C,s as w}from"./localstorage-D-Sg31Hf.js";const M="_aside_13693_1",S="_genre_list_13693_6",q="_genre_13693_6",D="_active_13693_19",m={aside:M,genre_list:S,genre:q,active:D},E=()=>{const{setIsActive:t,isActive:e,setMoviesList:r}=k(),s=y(),u=["аниме","биография","боевик","вестерн","военный","детектив","детский","документальный","драма","игра","история","комедия","концерт","короткометражка","криминал","мелодрама","музыка","мультфильм","мюзикл","новости","приключения","реальное ТВ","семейный","спорт","ток-шоу","триллер","ужасы","фантастика","фильм-нуар","фэнтези","церемония","uhd|4k","2025"],i=l.useCallback(async a=>{try{const c=C(a);if(c){r(c),t(a),s(`list/${a}`);return}const d=await x({genre:a}),_=d.data.map(o=>({age_restrictions:o.age_restrictions,poster:o.poster,name:o.name,genre:o.genre,year:o.year,rating_imdb:o.rating_imdb,token_movie:o.token_movie}));w({key:a,value:_}),t(a),r(d.data),s(`list/${a}`)}catch{}},[s]);return n.jsx("aside",{className:m.aside,children:n.jsx("nav",{children:n.jsx("ul",{className:m.genre_list,children:u.map((a,c)=>n.jsx("li",{className:e===a?`${m.genre} ${m.active}`:m.genre,onClick:d=>{d.preventDefault(),i(a)},children:n.jsx("button",{children:a})},c))})})})},z="_container_jz8kq_1",R="_logo_jz8kq_10",B="_header_jz8kq_17",P="_list_jz8kq_24",Z="_link_jz8kq_34",F="_active_jz8kq_39",p={container:z,logo:R,header:B,list:P,link:Z,active:F},K="_container_1ch6y_1",O="_input_1ch6y_6",V="_error_1ch6y_13",H="_button_1ch6y_18",v={container:K,input:O,error:V,button:H},T=t=>{if(!t)return{name:""};const e=Number(t.slice(-4));return isNaN(e)?{name:t}:{name:t.slice(0,-4).trim(),year:e}},U=async({setError:t,inputValue:e})=>{if(!e.name)return null;const r=T(e.name);console.log(r);try{const s=await x(r);return s.status==="error"?(t(s.status),s.data):(t(""),s.data)}catch(s){throw console.log(s),s}},W=()=>{const[t,e]=l.useState({name:""}),[r,s]=l.useState(""),[u,i]=l.useState(!0),a=l.useRef(null),c=y(),{setMovieData:d}=k(),_=async()=>{try{const h=await U({setError:s,inputValue:t});if(!h){s("Нет данных");return}console.log(h),d(h),c(`movie/${t.name}`),e({name:""})}catch(h){console.log(h)}finally{i(!1)}},o=h=>{var f;const L=((f=a.current)==null?void 0:f.value)??"",g=h.target.value;if(!g.trim()){s("не может быть пустым"),e({name:g}),i(!0);return}/^[a-zA-Zа-яА-ЯёЁ0-9\s]*$/.test(g)?(s(""),i(!1),e({name:L})):s("только буквы и цыфры")},$=h=>{h.key==="Enter"&&_()};return n.jsxs("div",{className:v.container,children:[n.jsxs("div",{children:[n.jsx("input",{className:v.input,type:"text",onChange:o,value:t.name,ref:a,onKeyDown:$,placeholder:"Название фильма и год"}),r&&n.jsx("div",{className:v.error,children:r})]}),n.jsx("button",{className:v.button,disabled:u,onClick:_,children:u?"Поиск...":"Найти"})]})};/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),J=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,s)=>s?s.toUpperCase():r.toLowerCase()),b=t=>{const e=J(t);return e.charAt(0).toUpperCase()+e.slice(1)},N=(...t)=>t.filter((e,r,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===r).join(" ").trim(),Q=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var X={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=l.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:u="",children:i,iconNode:a,...c},d)=>l.createElement("svg",{ref:d,...X,width:e,height:e,stroke:t,strokeWidth:s?Number(r)*24/Number(e):r,className:N("lucide",u),...!i&&!Q(c)&&{"aria-hidden":"true"},...c},[...a.map(([_,o])=>l.createElement(_,o)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=(t,e)=>{const r=l.forwardRef(({className:s,...u},i)=>l.createElement(Y,{ref:i,iconNode:e,className:N(`lucide-${G(b(t))}`,`lucide-${t}`,s),...u}));return r.displayName=b(t),r};/**
 * @license lucide-react v0.512.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M18 8a2 2 0 0 0 0-4 2 2 0 0 0-4 0 2 2 0 0 0-4 0 2 2 0 0 0-4 0 2 2 0 0 0 0 4",key:"10td1f"}],["path",{d:"M10 22 9 8",key:"yjptiv"}],["path",{d:"m14 22 1-14",key:"8jwc8b"}],["path",{d:"M20 8c.5 0 .9.4.8 1l-2.6 12c-.1.5-.7 1-1.2 1H7c-.6 0-1.1-.4-1.2-1L3.2 9c-.1-.6.3-1 .8-1Z",key:"1qo33t"}]],se=ee("popcorn",te),ne=()=>{const{isActive:t,setIsActive:e,setMoviesList:r}=k(),s=y(),u=[{path:"movie",name:"Фильмы"},{path:"serial",name:"Сериалы"},{path:"tv-show",name:"TV show"}],i=l.useCallback(async a=>{try{const c=C(a);if(c){r(c),e(a),s(`list/${a}`);return}const d=await x({list:a}),_=d.data.map(o=>({age_restrictions:o.age_restrictions,poster:o.poster,name:o.name,genre:o.genre,year:o.year,rating_imdb:o.rating_imdb,token_movie:o.token_movie}));w({key:a,value:_}),r(d.data),e(a),s(`list/${a}`)}catch(c){console.error("Ошибка при загрузке списка:",c)}},[s]);return n.jsxs("div",{className:p.container,children:[n.jsx(A,{to:"/",onClick:()=>{e("")},children:n.jsx(se,{className:p.logo})}),n.jsxs("header",{className:p.header,children:[n.jsx("nav",{children:n.jsx("ul",{className:p.list,children:u.map(a=>n.jsx("li",{onClick:()=>{i(a.path)},className:t===a.path?`${p.link} ${p.active}`:p.link,children:n.jsx("button",{children:a.name})},a.path))})}),n.jsx(W,{})]})]})},ae="_sidebar_10t14_1",re="_container_10t14_5",oe="_content_10t14_9",j={sidebar:ae,container:re,content:oe},de=()=>n.jsxs(n.Fragment,{children:[n.jsx(ne,{}),n.jsxs("div",{className:j.container,children:[n.jsx("div",{className:j.sidebar,children:n.jsx(E,{})}),n.jsx("div",{className:j.content,children:n.jsx(l.Suspense,{fallback:n.jsx(n.Fragment,{children:"loading...."}),children:n.jsx(I,{})})})]})]});export{de as default};
